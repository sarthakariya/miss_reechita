<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Confession to You</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Pacifico&family=Pinyon+Script&family=Sacramento&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background-overlay"></div>
    <div class="page-container">
        <h2>A Moment of Truth</h2>

        <p id="confession-question">Reechita, with every beat of my heart, I want to confess my deepest feelings to you. Will you let me?</p>
        
        <div class="buttons-container">
            <div class="button-wrapper">
                <button id="confessionYesBtn" class="animated-button action-button">
                    <span class="icon">&#128150;</span>
                </button>
                <div class="button-label">Yes, Tell Me!</div>
            </div>
            <div class="button-wrapper">
                <button id="confessionNoBtn" class="animated-button action-button no-button">
                    <span class="icon">&#128532;</span>
                </button>
                <div class="button-label">Not Now</div>
            </div>
        </div>

        <p id="confession-response" class="response-text hidden">My dearest Reechita, I love you more than words can express. You are my sunshine, my moon, and all my stars. Every moment with you is a treasure, and I wish for many more. You complete me. Always and forever, Sarthak.</p>

        <div class="nav-links">
            <a href="index.html" class="animated-button back-home-link">Go Back Home</a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const confessionYesBtn = document.getElementById('confessionYesBtn');
            const confessionNoBtn = document.getElementById('confessionNoBtn');
            const confessionResponse = document.getElementById('confession-response');
            const confessionQuestion = document.getElementById('confession-question');
            const buttonsContainer = document.querySelector('#page3-main-interaction .buttons-container') || document.querySelector('.page-container .buttons-container');

            let moveConfessionNoCount = 0;
            const maxConfessionMoves = 10;

            function moveConfessionNoButton() {
                if (window.innerWidth <= 768) return; // Static on small screens

                if (moveConfessionNoCount >= maxConfessionMoves) {
                    confessionNoBtn.style.position = 'static';
                    confessionNoBtn.style.transform = 'none';
                    confessionNoBtn.classList.remove('float-animation');
                    confessionNoBtn.style.cursor = 'not-allowed';
                    confessionNoBtn.removeEventListener('mouseover', moveConfessionNoButton);
                    confessionNoBtn.removeEventListener('click', moveConfessionNoButton);
                    return;
                }

                if (!buttonsContainer) return; // Ensure container exists

                const containerRect = buttonsContainer.getBoundingClientRect();
                const buttonRect = confessionNoBtn.getBoundingClientRect();

                let newX, newY;
                let attempts = 0;
                const padding = 20;

                do {
                    newX = Math.random() * (containerRect.width - buttonRect.width - padding * 2) + padding;
                    newY = Math.random() * (containerRect.height - buttonRect.height - padding * 2) + padding;
                    attempts++;
                    if (attempts > 50) {
                        console.warn("Could not find a valid new position for Confession No button.");
                        break;
                    }
                } while (
                    newX < 0 || newX + buttonRect.width > containerRect.width ||
                    newY < 0 || newY + buttonRect.height > containerRect.height ||
                    (Math.abs(newX - (confessionYesBtn.offsetLeft + confessionYesBtn.offsetWidth / 2)) < 150 && Math.abs(newY - (confessionYesBtn.offsetTop + confessionYesBtn.offsetHeight / 2)) < 150)
                );

                confessionNoBtn.style.position = 'absolute';
                confessionNoBtn.style.left = `${newX}px`;
                confessionNoBtn.style.top = `${newY}px`;
                confessionNoBtn.classList.add('float-animation');
                moveConfessionNoCount++;

                setTimeout(() => {
                    confessionNoBtn.classList.remove('float-animation');
                }, 800);
            }

            confessionNoBtn.addEventListener('mouseover', moveConfessionNoButton);
            confessionNoBtn.addEventListener('click', moveConfessionNoButton);

            confessionYesBtn.addEventListener('click', () => {
                confessionQuestion.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                confessionQuestion.style.opacity = '0';
                confessionQuestion.style.transform = 'translateY(-20px)';

                confessionNoBtn.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                confessionNoBtn.style.opacity = '0';
                confessionNoBtn.style.transform = 'scale(0.5)';
                confessionNoBtn.style.pointerEvents = 'none'; // Disable interaction

                confessionYesBtn.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                confessionYesBtn.style.opacity = '0';
                confessionYesBtn.style.transform = 'scale(0.5)';
                confessionYesBtn.style.pointerEvents = 'none'; // Disable interaction


                setTimeout(() => {
                    confessionQuestion.classList.add('hidden');
                    confessionNoBtn.classList.add('hidden');
                    confessionYesBtn.classList.add('hidden');

                    confessionResponse.classList.remove('hidden');
                    confessionResponse.style.opacity = '0';
                    confessionResponse.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        confessionResponse.style.transition = 'opacity 1s ease-out, transform 1s ease-out';
                        confessionResponse.style.opacity = '1';
                        confessionResponse.style.transform = 'translateY(0)';
                    }, 50);
                }, 500);
            });

            // Initial position for confessionNoBtn
            function setConfessionNoButtonInitialPosition() {
                if (window.innerWidth > 768 && buttonsContainer) {
                    const yesBtnRect = confessionYesBtn.getBoundingClientRect();
                    const containerRect = buttonsContainer.getBoundingClientRect();

                    confessionNoBtn.style.position = 'absolute';
                    confessionNoBtn.style.left = `${yesBtnRect.right - containerRect.left + 80}px`;
                    confessionNoBtn.style.top = `${yesBtnRect.top - containerRect.top}px`;
                    confessionNoBtn.style.transform = 'translateY(0)';
                } else {
                    confessionNoBtn.style.position = 'static';
                    confessionNoBtn.style.transform = 'none';
                    confessionNoBtn.style.left = 'unset';
                    confessionNoBtn.style.top = 'unset';
                }
                moveConfessionNoCount = 0;
            }
            window.addEventListener('load', setConfessionNoButtonInitialPosition);
            window.addEventListener('resize', setConfessionNoButtonInitialPosition);
        });
    </script>
</body>
</html>
